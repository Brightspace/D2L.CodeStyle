os: Visual Studio 2017

version: 0.1.0.{build}
pull_requests:
  do_not_increment_build_number: true
skip_tags: true
clone_depth: 5

before_build:
  - dotnet --info
  - dotnet version
  - dotnet restore
  - nuget restore

build_script:
  - dotnet build -c Release

after_build:
  - dotnet pack src\D2L.CodeStyle.Annotations -o artifacts -c Release
  - nuget pack src\D2L.CodeStyle.Analyzers\D2L.CodeStyle.Analyzers.csproj -Properties "Configuration=Release" -OutputDirectory artifacts
  - nuget pack src\D2L.CodeStyle.TestAnalzyers\D2L.CodeStyle.TestAnalzyers.csproj -Properties "Configuration=Release" -OutputDirectory artifacts

build:
  publish_nuget: true
  parallel: true
  verbosity: minimal

configuration:
- Debug
- Release

artifacts:
- path: artifacts\*.nupkg
  name: NuGet